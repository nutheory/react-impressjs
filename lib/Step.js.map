{"version":3,"sources":["../src/components/Step.js"],"names":["defaultData","x","y","z","rotateX","rotateY","rotateZ","scale","Step","props","className","duration","state","id","gtepID","data","getData","isPresented","initStep","e","goto","target","classList","contains","document","documentElement","parentNode","idHelper","activeStep","rotate","_stepStyle","position","transform","transformStyle","children","_stepClassName","getClassName","getStyle","handleClick","bind","nextProps","prevState","Component"],"mappings":"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","file":"Step.js","sourcesContent":["import React, {Component}                   from 'react';\nimport {rotate, scale, toNumber, translate} from './util';\n\nconst defaultData = {\n  x: 0,\n  y: 0,\n  z: 0,\n  rotateX: 0,\n  rotateY: 0,\n  rotateZ: 0,\n  scale: 1,\n};\n\nexport default class Step extends Component {\n  constructor(props) {\n    super(props);\n\n    const {className, duration} = this.props;\n\n    this.state = {\n      id: this.gtepID(),\n      className: className ? ('step ' + className) : 'step',\n      data: this.getData(),\n      duration: duration ? duration : 1000,\n      isPresented: false,\n    };\n  }\n\n  componentDidMount() {\n    const {initStep} = this.props;\n\n    initStep(this.state);\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState){\n    const {id, isPresented} = prevState;\n\n    if (id === nextProps.activeStep.id && !isPresented){\n      return { isPresented: true };\n    }\n    return { isPresented: false };\n  }\n\n  // Step's Event\n  handleClick(e) {\n    const {goto} = this.props;\n    let target = e.target;\n\n    while (!target.classList.contains('step') &&\n    !target.classList.contains('active') &&\n    !target.classList.contains('oi-step-element') &&\n    target !== document.documentElement) {\n      target = target.parentNode;\n    }\n\n    if (target !== document.documentElement)\n      if (target.classList.contains('step'))\n        goto(this.state, this.state.duration);\n  }\n\n  // Step's ID, ClassName, Style\n  gtepID() {\n    const {id, idHelper} = this.props;\n\n    return id || ('step-' + idHelper);\n  }\n\n  getClassName() {\n    const {activeStep} = this.props;\n    const {id, className, isPresented} = this.state;\n\n    if (id === activeStep.id)\n      return className + ' active present';\n    else if (isPresented)\n      return className + ' past';\n    else\n      return className + ' future';\n  }\n\n  getData() {\n    const {data} = this.props;\n\n    return data ? {\n      x: toNumber(data.x),\n      y: toNumber(data.y),\n      z: toNumber(data.z),\n      rotateX: toNumber(data.rotateX),\n      rotateY: toNumber(data.rotateY),\n      rotateZ: toNumber(data.rotateZ || data.rotate),\n      scale: toNumber(data.scale, 1),\n    } : defaultData;\n  }\n\n  getStyle() {\n    const {data} = this.state;\n\n    let _stepStyle = {\n      position: 'absolute',\n      transform: 'translate(-50%, -50%) ',\n      transformStyle: 'preserve-3d',\n    };\n\n    _stepStyle.transform += translate(data ? data : defaultData) +\n        rotate(data ? data : defaultData) +\n        scale(data.scale ? data.scale : defaultData);\n\n    return _stepStyle;\n  }\n\n  render() {\n    const {children} = this.props;\n    const {id} = this.state;\n\n    const _stepClassName = this.getClassName();\n    const _stepStyle = this.getStyle();\n\n    return (\n        <div id={id}\n             className={_stepClassName}\n             style={_stepStyle}\n             onClick={this.handleClick.bind(this)}>\n          {children}\n        </div>\n    );\n  }\n}"]}